(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c5961e0"],{"0dfe":function(e,t,a){"use strict";a.r(t);var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("所有用户信息")])],1)],1)]),a("el-col",{attrs:{span:4}},[a("el-col",{attrs:{span:20}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"购保月份"},on:{change:function(t){return e.mouth()}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),a("el-col",[a("el-checkbox",{on:{change:e.checkedscYear},model:{value:e.scYear,callback:function(t){e.scYear=t},expression:"scYear"}},[e._v("当年审车")])],1)],1),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"search"},[a("el-col",{attrs:{span:18}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"可搜索姓名，联系电话，地址",placement:"bottom"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入搜索内容",clearable:""},on:{change:function(t){return e.change()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchinfo()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),a("el-button",{staticClass:"btn",attrs:{icon:"el-icon-search",circle:""},on:{click:function(t){return e.searchinfo()}}})],1)]),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.curtableData,stripe:""}},[a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"100",fixed:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"call",label:"联系电话",width:"140"}}),a("el-table-column",{attrs:{label:"购保时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),a("el-table-column",{attrs:{prop:"date_sc",label:"首次审车时间",width:"140"}}),a("el-table-column",{attrs:{prop:"nextSc",label:"下次审车时间",width:"140"}}),a("el-table-column",{attrs:{prop:"address",label:"详细地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"购车日期",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date1))])]}}])}),a("el-table-column",{attrs:{label:"保险",prop:"bx_true",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"已购","inactive-text":"未购",disabled:""},model:{value:t.row.bx_true,callback:function(a){e.$set(t.row,"bx_true",a)},expression:"scope.row.bx_true"}})]}}])}),a("el-table-column",{attrs:{label:"审车",prop:"sc_true",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"已审","inactive-text":"未审",disabled:""},model:{value:t.row.sc_true,callback:function(a){e.$set(t.row,"sc_true",a)},expression:"scope.row.sc_true"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/userinfo/details",query:{uid:t.row._id}}}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.details(t.$index,t.row)}}},[e._v("更多/编辑")])],1),a("el-popconfirm",{attrs:{title:"确定删除？",icon:"el-icon-info","icon-color":"red"},on:{confirm:function(a){return e.handleDelete(t.$index,t.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","page-size":e.pageSize,"current-page":e.curPage,layout:"prev, pager, next",total:e.total},on:{"current-change":e.currentChange}})],1)]],2)},l=[],s=(a("4160"),a("fb6a"),a("a9e3"),a("ac1f"),a("5319"),a("841c"),a("159b"),a("c1df")),i=a.n(s),n={name:"alluser",data:function(){return{time:i()().format("YYYY"),dialogimg:!1,dialogeditimg:!1,dialogVisible:!1,dialogImageUrl:"",srcList:[],date:"",search:"",loading:!0,curPage:1,pageSize:15,tableData:[],tmp_tableData:[],dialogFormVisible:!1,form:{},formLabelWidth:"120px",img_:"",show_:"none",edit:null,TmpDate1:"",scYear:!1}},created:function(){var e=this,t=this.$createElement,a=localStorage.getItem("page");1==a&&(this.$router.go(0),localStorage.removeItem("page"));var c="LXuao";this.$axios({method:"POST",url:"/api/finduser",data:{id:c}}).then((function(a){function c(e,t){return e.code-t.code}e.tableData=a.data.data,e.tableData.sort(c);var l=0;e.tableData.forEach((function(a,c){if(e.tableData[c].date1=a.date1,null!=e.tableData[c].date&&(e.tableData[c].date=a.date.slice(5,10).replace("/","-")),null!=e.tableData[c].date_sc){var s=e.time-a.date_sc.slice(0,4),i=Number(a.date_sc.slice(0,4));if(s<6){switch(s){case 1:i+=2;break;case 0:case 2:i+=2;break;case 3:i+=4;break;case 4:i+=4;break;case 5:i+=5;break}a.nextSc=i+a.date_sc.slice(4,12).replace(/\//g,"-"),e.time==i&&(l+=1,a.nextSc=t("span",{style:"color:orange"},[i,a.date_sc.slice(4,12).replace(/\//g,"-")]))}else s>=6&&s<20&&(l+=1,a.nextSc=t("span",{style:"color:red"},[e.time,a.date_sc.slice(4,12).replace(/\//g,"-")]));e.tableData[c].date_sc=a.date_sc.slice(0,10).replace(/\//g,"-")}e.tmp_tableData=e.tableData})),setTimeout((function(){0!=l&&e.$notify({title:"提示",message:"本年有"+l+"位车主需要审车！",type:"info"})}),1500),setTimeout((function(){e.loading=!1}),500)})),setTimeout((function(){var t=0,a=new Date;e.tableData.forEach((function(c,l){parseInt(e.tableData[l].code)==a.getMonth()+1&&(t+=1)})),0!=t&&e.$notify({title:"提示",message:"本月有"+t+"位车主需要购买保险！",type:"info"})}),1e3)},computed:{total:function(e,t){return this.tableData.length},curtableData:function(){var e=this.curPage,t=this.pageSize;return this.tableData.slice((e-1)*t,t*e)}},methods:{changeStatus:function(e){this.show_=1==e?"":"none"},currentChange:function(e){this.curPage=e},handleDelete:function(e,t){var a=this,c=this.$createElement,l=t.img.replace("\\","/"),s=t.img_qs.replace("\\","/"),i=t.img_new.replace("\\","/"),n=t.img_jsz.replace("\\","/");this.$axios({method:"POST",url:"/api/deluser",data:{id:t._id,imgurl:l,img_qs:s,img_new:i,img_jsz:n}}).then((function(e){if(1===e.data.status){a.$message({message:"删除成功!",type:"success"});var t="LXuao";a.$axios({method:"POST",url:"/api/finduser",data:{id:t}}).then((function(e){function t(e,t){return e.code-t.code}a.tableData=e.data.data,a.tableData.sort(t),a.tableData.forEach((function(e,t){if(null!=a.tableData[t].date&&(a.tableData[t].date=e.date.slice(5,10).replace("/","-")),null!=a.tableData[t].date_sc){var l=a.time-e.date_sc.slice(0,4),s=Number(e.date_sc.slice(0,4));if(l<6){switch(l){case 1:s+=2;break;case 0:case 2:s+=2;break;case 3:s+=4;break;case 4:s+=4;break;case 5:s+=5;break}e.nextSc=s+e.date_sc.slice(4,12).replace(/\//g,"-"),a.time==s&&(e.nextSc=c("span",{style:"color:orange"},[s,e.date_sc.slice(4,12).replace(/\//g,"-")]))}else l>=6&&l<20&&(e.nextSc=c("span",{style:"color:red"},[a.time,e.date_sc.slice(4,12).replace(/\//g,"-")]));a.tableData[t].date_sc=e.date_sc.slice(0,10).replace(/\//g,"-")}}))}))}}))},searchinfo:function(){var e=this,t=this.$createElement;this.search=this.search.replace(/(^\s*)|(\s*$)/g,""),this.$axios({method:"POST",url:"/api/finduserinfo",data:{info:this.search}}).then((function(a){e.curPage=1,e.tableData=a.data.data,e.tableData.forEach((function(a,c){if(null!=e.tableData[c].date&&(e.tableData[c].date=a.date.slice(5,10).replace("/","-")),null!=e.tableData[c].date_sc){var l=e.time-a.date_sc.slice(0,4),s=Number(a.date_sc.slice(0,4));if(l<6){switch(l){case 1:s+=2;break;case 0:case 2:s+=2;break;case 3:s+=4;break;case 4:s+=4;break;case 5:s+=5;break}a.nextSc=s+a.date_sc.slice(4,12).replace(/\//g,"-"),e.time==s&&(a.nextSc=t("span",{style:"color:orange"},[s,a.date_sc.slice(4,12).replace(/\//g,"-")]))}else l>=6&&l<20&&(a.nextSc=t("span",{style:"color:red"},[e.time,a.date_sc.slice(4,12).replace(/\//g,"-")]));e.tableData[c].date_sc=a.date_sc.slice(0,10).replace(/\//g,"-")}}))}))},checkedscYear:function(){if(this.scYear){var e=[];this.tableData.forEach((function(t,a){void 0!=t.nextSc&&t.nextSc instanceof Object&&e.push(t)})),this.tableData=e}else this.tableData=this.tmp_tableData},mouth:function(){var e=this,t=this.$createElement;if(this.date){var a=this.date.toLocaleDateString(),c=a.slice(5,7).replace("/","");this.$axios({method:"POST",url:"/api/findbx",data:{date:c}}).then((function(a){e.curPage=1,e.tableData=a.data.data,e.tableData.forEach((function(a,c){if(e.tableData[c].date1=a.date1,null!=e.tableData[c].date&&(e.tableData[c].date=a.date.slice(5,10).replace("/","-")),null!=e.tableData[c].date_sc){var l=e.time-a.date_sc.slice(0,4),s=Number(a.date_sc.slice(0,4));if(l<6){switch(l){case 1:s+=2;break;case 0:case 2:s+=2;break;case 3:s+=4;break;case 4:s+=4;break;case 5:s+=5;break}a.nextSc=s+a.date_sc.slice(4,12).replace(/\//g,"-"),e.time==s&&(a.nextSc=t("span",{style:"color:orange"},[s,a.date_sc.slice(4,12).replace(/\//g,"-")]))}else l>=6&&l<20&&(a.nextSc=t("span",{style:"color:red"},[e.time,a.date_sc.slice(4,12).replace(/\//g,"-")]));e.tableData[c].date_sc=a.date_sc.slice(0,10).replace(/\//g,"-")}}))}))}else if(!this.date){var l="LXuao";this.$axios({method:"POST",url:"/api/finduser",data:{id:l}}).then((function(t){e.tableData=e.tmp_tableData,setTimeout((function(){e.loading=!1}),1e3)}))}},change:function(){""==this.search&&(this.tableData=this.tmp_tableData)},details:function(e,t){},handleRemove:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},imgChange:function(e,t){this.edit=e.raw}},components:{}},r=n,o=(a("257a"),a("2877")),d=Object(o["a"])(r,c,l,!1,null,"7075a196",null);t["default"]=d.exports},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"257a":function(e,t,a){"use strict";a("7aba")},"7aba":function(e,t,a){},"841c":function(e,t,a){"use strict";var c=a("d784"),l=a("825a"),s=a("1d80"),i=a("129f"),n=a("14c3");c("search",1,(function(e,t,a){return[function(t){var a=s(this),c=void 0==t?void 0:t[e];return void 0!==c?c.call(t,a):new RegExp(t)[e](String(a))},function(e){var c=a(t,e,this);if(c.done)return c.value;var s=l(e),r=String(this),o=s.lastIndex;i(o,0)||(s.lastIndex=0);var d=n(s,r);return i(s.lastIndex,o)||(s.lastIndex=o),null===d?-1:d.index}]}))}}]);
//# sourceMappingURL=chunk-6c5961e0.a093c2dd.js.map